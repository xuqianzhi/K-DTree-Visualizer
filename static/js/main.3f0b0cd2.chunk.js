(this["webpackJsonpneighbor-finding-visualizer"]=this["webpackJsonpneighbor-finding-visualizer"]||[]).push([[0],[,,,,,,,,,,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},,function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var i=n(1),o=n.n(i),a=n(7),s=n.n(a),r=(n(14),n.p,n(15),n(2)),c=n(3),l=n(6),u=n(5),d=n(4),h=(n(16),n(0)),g=37.871416963460454,p=-122.26007750513202;function m(t){var e=window.mapData.map;if(e&&t){var n=Math.pow(2,e.getZoom()),i=new window.google.maps.LatLng(e.getBounds().getNorthEast().lat(),e.getBounds().getSouthWest().lng()),o=e.getProjection().fromLatLngToPoint(i),a=e.getProjection().fromLatLngToPoint(t.getPosition());return{x:Math.floor((a.x-o.x)*n),y:Math.floor((a.y-o.y)*n)}}}var f=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).visualizeKDTree=i.props.visualizeKDTree,i.state={},i}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.fetchGoogleMapsAPIScript()}},{key:"fetchGoogleMapsAPIScript",value:function(){this.initMap=this.initMap.bind(this);var t=document.createElement("script");t.setAttribute("id","loadmap-script"),t.async=!0,t.src="https://maps.googleapis.com/maps/api/js?key=".concat("AIzaSyAquzNVhFe5cmvQxJKz6_g5A5dKNzDC0qo","&libraries=places&v=weekly"),t.type="text/javascript",t.onload=this.initMap,document.getElementById("map-container").appendChild(t)}},{key:"initMap",value:function(){var t=this,e=window.google;window.mapData.nearestInfowindow=new window.google.maps.InfoWindow({content:"Nearest Search Result"});var n=new e.maps.LatLng(g,p),i=new e.maps.Map(document.getElementById("map"),{center:n,zoom:14,mapTypeId:"roadmap",mapTypeControl:!1,fullscreenControl:!1,styles:[{stylers:[{lightness:0}]}]}),o=document.createElement("button");o.setAttribute("id","visualization-button"),window.mapData.nearest_position?(o.textContent="Restart",o.onclick=function(){t.restartButtonClicked()}):(o.textContent="Visualize K-D Tree",o.onclick=this.visualizeKDTree),i.controls[window.google.maps.ControlPosition.TOP_RIGHT].push(o);var a={url:"http://maps.google.com/mapfiles/ms/icons/blue-dot.png",size:new e.maps.Size(71,71),origin:new e.maps.Point(0,0),anchor:new e.maps.Point(17,34),scaledSize:new e.maps.Size(35,35)},s=new e.maps.Marker({map:i,icon:a,title:"UC Berkeley",position:n}),r=document.getElementById("pac-input"),c=new e.maps.places.SearchBox(r);i.controls[e.maps.ControlPosition.TOP_LEFT].push(r),i.addListener("bounds_changed",(function(){c.setBounds(i.getBounds())}));var l=window.mapData.markers,u=[];if(0!=l.length){var d=new e.maps.LatLngBounds;d.extend(s.getPosition());var h=this.findNearestMarker(l);(h||0===h)&&(window.mapData.nearest_position.index=h);for(var f=0;f<l.length;f++){var w=l[f],v=null;f==h&&(v=e.maps.Animation.BOUNCE),w.setMap(null);var y={size:new e.maps.Size(71,71),origin:new e.maps.Point(0,0),anchor:new e.maps.Point(17,34),scaledSize:new e.maps.Size(25,25)},x={lat:w.getPosition().lat(),lng:w.getPosition().lng()},b=w.getTitle();u.push(new e.maps.Marker({map:i,icon:y,title:b,position:x,animation:v})),d.extend(x)}i.fitBounds(d)}window.mapData.markers=u,window.mapData.searchBox=c,window.mapData.ucb_marker=s,window.mapData.map=i,c.addListener("places_changed",(function(){window.mapData.nearest_position=null,window.mapData.nearestInfowindow=null;var o=document.getElementById("visualization-button");o.textContent="Visualize K-D Tree",o.onclick=t.visualizeKDTree;var a=c.getPlaces();if(0!=a.length){u.forEach((function(t){t.setMap(null)})),u=[];var s=new e.maps.LatLngBounds;s.extend(n),a.forEach((function(t){if(t.geometry&&t.geometry.location){var n={size:new e.maps.Size(71,71),origin:new e.maps.Point(0,0),anchor:new e.maps.Point(17,34),scaledSize:new e.maps.Size(25,25)};u.push(new e.maps.Marker({map:i,icon:n,title:t.name,position:t.geometry.location})),t.geometry.viewport?s.union(t.geometry.viewport):s.extend(t.geometry.location),1==a.length&&alert("Only 1 place is found, which will display trivial visualization \n \n Try search general terms to display more places, e.g. Mcdonalds, Ramen")}else console.log("Returned place contains no geometry")})),console.log("reach here"),window.mapData.markers=u,i.fitBounds(s)}}));e.maps.event.addListener(i,"bounds_changed",(function(){if(!window.mapData.nearest_position){var t=window.mapData.ucb_marker,o=window.mapData.markers.slice();o.push(t);for(var a=!1,s=0;s<o.length;s++){var r=m(o[s]),c=r.x,l=r.y;if(c<=0||l<=0||c>=window.innerWidth||l>=window.innerHeight){a=!0;break}}if(a)if(alert("You are about to drag or zoom some marker out of view port, which will affect neighbor searching visualization"),1==o.length)i.setZoom(14),i.setCenter(n);else{var u=new e.maps.LatLngBounds;o.forEach((function(t){u.extend(t.getPosition())})),i.fitBounds(u)}}}))}},{key:"restartButtonClicked",value:function(){window.mapData.nearest_position=null,window.mapData.nearestInfowindow=null;var t=document.getElementById("visualization-button");t.textContent="Start Visualization",t.onclick=this.visualizeKDTree;var e=window.google,n=window.mapData.map,i=window.mapData.markers,o=new e.maps.LatLng(g,p);console.log("marker is ",i),i.forEach((function(t){t.setMap(null)})),window.mapData.markers=[],n.setZoom(14),n.setCenter(o),document.getElementById("pac-input").style.display="inline-block"}},{key:"findNearestMarker",value:function(t){var e=window.mapData.nearest_position;if(e){var n=Number.MAX_VALUE,i=null;if(t&&0!=t.length){for(var o=0;o<t.length;o++){var a=t[o].getPosition(),s=Math.pow(a.lat()-e.lat,2)+Math.pow(a.lng()-e.lng,2);s<=n&&(n=s,i=o)}return i}}}},{key:"render",value:function(){return Object(h.jsx)("div",{id:"map-container",children:Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{id:"pac-input",class:"controls",type:"text",placeholder:"Search Google Maps"}),Object(h.jsx)("div",{id:"map"})]})})}}]),n}(i.Component),w=(n(18),n(22));function v(t,e,n,i){return Math.sqrt(Math.pow(t-e,2)+Math.pow(n-i,2))}var y=function(){function t(e){Object(r.a)(this,t),this.position=e}return Object(c.a)(t,[{key:"setIsVertical",value:function(t){this.isVertical=t}},{key:"getPosition",value:function(){return this.position}},{key:"getIsVertical",value:function(){if(this.isVertical)return this.isVertical}}]),t}(),x=function(){function t(e,n,i,o){Object(r.a)(this,t),this.position=e,this.x_bound=n,this.y_bound=i,this.isVertical=o}return Object(c.a)(t,[{key:"getPosition",value:function(){return this.position}},{key:"getIsVertical",value:function(){return this.isVertical}},{key:"getXBound",value:function(){return this.x_bound}},{key:"getYBound",value:function(){return this.y_bound}}]),t}(),b=function(){function t(e,n,i){Object(r.a)(this,t),this.dots=e,this.root_dot=e[Math.floor(e.length/2)],this.root=new D(!0,this.root_dot,n,i),this.root.sortCoordinates(e,!0),this.root.constructTree(e)}return Object(c.a)(t,[{key:"getRoot",value:function(){return this.root}},{key:"iterateTree",value:function(){var t=this.getRoot(),e=[];return t&&t.iterate(e),e}},{key:"getNodeTraversedAfterInsertion",value:function(t){var e=this.getRoot(),n=[];return e&&e.getNodeTraversedAfterInsertion(n,t),n}},{key:"performNearestSearching",value:function(t){var e=t.x,n=t.y,i=this.getNodeTraversedAfterInsertion(t);i.pop();for(var o=i[i.length-1],a=o.getPosition().x,s=o.getPosition().y,r=v(e,a,n,s),c=o,l=new Set,u=[],d=[];0!=i.length;){if(o=i.pop(),l.add(o.getID()),v(e,a=o.getPosition().x,n,s=o.getPosition().y)<=r&&(r=v(e,a,n,s),c=o),o.right&&!l.has(o.right.getID())){o.intersectDownOrRight(e,n,r)?(i.push(o.right),u.push(o)):u.push(null);var h=o.isVertical?"right":"down";d.push({length:r,direction:h})}if(o.left&&!l.has(o.left.getID())){o.intersectUpOrLeft(e,n,r)?(i.push(o.left),u.push(o)):u.push(null);h=o.isVertical?"left":"up";d.push({length:r,direction:h})}}return{nearest:c,bound_animation:u,crossing_animation:d}}}]),t}(),D=function(){function t(e,n,i,o){Object(r.a)(this,t),this.isVertical=e,this.dot=n,this.dot.setIsVertical(e),this.x_bound=i,this.y_bound=o,this.line=new x(n.getPosition(),i,o,e),this.id=Object(w.a)()}return Object(c.a)(t,[{key:"getID",value:function(){return this.id}},{key:"getLine",value:function(){return this.line}},{key:"getPosition",value:function(){return this.getDot().getPosition()}},{key:"getDot",value:function(){return this.dot}},{key:"getIsVertical",value:function(){return this.isVertical}},{key:"getXBound",value:function(){return this.x_bound}},{key:"getYBound",value:function(){return this.y_bound}},{key:"sortCoordinates",value:function(t,e){e?t.sort((function(t,e){var n=t.getPosition().x,i=e.getPosition().x;return n<i?-1:n>i?1:0})):t.sort((function(t,e){var n=t.getPosition().y,i=e.getPosition().y;return n<i?-1:n>i?1:0}))}},{key:"constructTree",value:function(e){if(!(e.length<=1)){var n=e.slice(0,Math.floor(e.length/2)),i=e.slice(Math.floor(e.length/2)+1,e.length);if(this.sortCoordinates(n,!this.isVertical),this.sortCoordinates(i,!this.isVertical),0!=n.length){var o,a,s=n[Math.floor(n.length/2)];this.isVertical?(o={min:this.x_bound.min,max:this.dot.position.x},a=this.y_bound):(o=this.x_bound,a={min:this.y_bound.min,max:this.dot.position.y}),this.left=new t(!this.isVertical,s,o,a),this.left.constructTree(n)}if(0!=i.length){var r,c,l=i[Math.floor(i.length/2)];this.isVertical?(r={min:this.dot.position.x,max:this.x_bound.max},c=this.y_bound):(r=this.x_bound,c={min:this.dot.position.y,max:this.y_bound.max}),this.right=new t(!this.isVertical,l,r,c),this.right.constructTree(i)}}}},{key:"iterate",value:function(t){t.push(this),this.left&&this.left.iterate(t),this.right&&this.right.iterate(t)}},{key:"getNodeTraversedAfterInsertion",value:function(t,e){var n=e.x,i=e.y,o=this.getDot().getPosition().x,a=this.getDot().getPosition().y;return t.push(this),this.isVertical?n<o?this.left?this.left.getNodeTraversedAfterInsertion(t,e):(t.push(this.getInsertedDestinationNode(e,o,a)),t):this.right?this.right.getNodeTraversedAfterInsertion(t,e):(t.push(this.getInsertedDestinationNode(e,o,a)),t):i<a?this.left?this.left.getNodeTraversedAfterInsertion(t,e):(t.push(this.getInsertedDestinationNode(e,o,a)),t):this.right?this.right.getNodeTraversedAfterInsertion(t,e):(t.push(this.getInsertedDestinationNode(e,o,a)),t)}},{key:"getInsertedDestinationNode",value:function(e,n,i){var o,a,s=e.x,r=e.y;this.isVertical?(a=this.y_bound,o=s<n?{min:this.x_bound.min,max:this.dot.position.x}:{min:this.dot.position.x,max:this.x_bound.max}):(o=this.x_bound,a=r<i?{min:this.y_bound.min,max:this.dot.position.y}:{min:this.dot.position.y,max:this.y_bound.max});var c=new y(e);return new t(!this.isVertical,c,o,a)}},{key:"getNodesTraversedAfterClosestSearching",value:function(t,e){var n=e.x,i=e.y;v(n,t[t.length-1].getPosition().x,i,t[t.length-1].getPosition().y)}},{key:"intersectUpOrLeft",value:function(t,e,n){return this.isVertical?t-n<=this.getPosition().x:e-n<=this.getPosition().y}},{key:"intersectDownOrRight",value:function(t,e,n){return this.isVertical?t+n>=this.getPosition().x:e+n>=this.getPosition().y}}]),t}(),k=n(8),j=1500,T=200;var P=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).state={tree_nodes:[],searching_bound:{x_bound:{min:0,max:window.innerWidth},y_bound:{min:0,max:window.innerHeight}},animation_speed:2,radar_radius:20,radar_direction:"up",running_status:"constructing"},i}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=window.mapData.markers,n=this.markerToPixelDots(e),i=this.getKDTree(n);this.KDTree=i;var o=i.iterateTree(),a=[];o.forEach((function(t){a.push({node:t,is_dot_displayed:!1,is_line_displayed:!1,drawing_line_length:0})})),this.setState({tree_nodes:a}),setTimeout((function(){t.displaySearchingAnimation()}),1e3)}},{key:"markerToPixelDots",value:function(t){var e=window.mapData.map;if(e){var n=Math.pow(2,e.getZoom()),i=new window.google.maps.LatLng(e.getBounds().getNorthEast().lat(),e.getBounds().getSouthWest().lng()),o=e.getProjection().fromLatLngToPoint(i),a=[];return t.forEach((function(t){if(t){var i=e.getProjection().fromLatLngToPoint(t.getPosition()),s={x:Math.floor((i.x-o.x)*n),y:Math.floor((i.y-o.y)*n)};a.push(new y(s))}})),a}}},{key:"getLatLngFromPixelOffset",value:function(t){var e=window.mapData.map;if(e){var n=Math.pow(2,e.getZoom()),i=new window.google.maps.LatLng(e.getBounds().getNorthEast().lat(),e.getBounds().getSouthWest().lng()),o=e.getProjection().fromLatLngToPoint(i),a=t.x/n,s=t.y/n,r=new window.google.maps.Point(a+o.x,s+o.y),c=e.getProjection().fromPointToLatLng(r);return{lat:c.lat(),lng:c.lng()}}}},{key:"getUCBDot",value:function(){var t=[window.mapData.ucb_marker],e=this.markerToPixelDots(t)[0].getPosition();return new y(e)}},{key:"getKDTree",value:function(t){t.sort((function(t,e){var n=t.getPosition().x,i=e.getPosition().x;return n<i?-1:n>i?1:0}));var e={min:0,max:window.innerWidth},n={min:0,max:window.innerHeight};return new b(t,e,n)}},{key:"drawBoundAnimatedly",value:function(t,e,n,i){for(var o=this,a=25,s=n,r=n.x_bound.min,c=n.x_bound.max,l=n.y_bound.min,u=n.y_bound.max,d=i.x_bound,h=i.y_bound,g=d.min-r,p=d.max-c,m=h.min-l,f=h.max-u,w=function(n){var i=r+g*((n+1)/a),d=c+p*((n+1)/a),h=l+m*((n+1)/a),w=u+f*((n+1)/a);setTimeout((function(){s.x_bound={min:i,max:d},s.y_bound={min:h,max:w},o.setState({searching_bound:s})}),t+e*(n/a))},v=0;v<a;v++)w(v)}},{key:"drawLineAnimatedly",value:function(t,e,n,i){for(var o=this,a=function(a){setTimeout((function(){var t=0;t+=n*((a+1)/20),o.setState({radar_radius:t,radar_direction:i,running_status:"searching"})}),t+e*(a/20))},s=0;s<20;s++)a(s)}},{key:"drawColoredDotAtTime",value:function(t,e,n,i){setTimeout((function(){document.getElementById(e).style.backgroundColor="crimson",n&&(document.getElementById(n).style.backgroundColor=i)}),t)}},{key:"drawLine",value:function(t,e,n,i,o,a,s,r){var c="up"==a||"down"==a;return"right"===a||"down"==a?Object(h.jsx)("div",{className:"line",style:c?{left:"".concat(t,"px"),top:"".concat(e,"px"),backgroundColor:o,borderRadius:"".concat(r,"px"),height:"".concat(n,"px"),display:s,width:"".concat(i,"px")}:{left:"".concat(t,"px"),top:"".concat(e,"px"),backgroundColor:o,borderRadius:"".concat(r,"px"),width:"".concat(n,"px"),display:s,height:"".concat(i,"px")}}):Object(h.jsx)("div",{className:"line",style:c?{right:"".concat(window.innerWidth-t-i+1,"px"),bottom:"".concat(window.innerHeight-e,"px"),height:"".concat(n,"px"),display:s,width:"".concat(i,"px"),backgroundColor:o,borderRadius:"".concat(r,"px")}:{right:"".concat(window.innerWidth-t,"px"),bottom:"".concat(window.innerHeight-e-i+1,"px"),width:"".concat(n,"px"),display:s,height:"".concat(i,"px"),backgroundColor:o,borderRadius:"".concat(r,"px")}})}},{key:"displaySearchingAnimation",value:function(){var t=this,e=1/Math.pow(2,this.state.animation_speed),n=this.state.tree_nodes;n.forEach((function(t){t.is_dot_displayed=!1,t.is_line_displayed=!1})),this.setState({tree_nodes:n,running_status:"constructing"});for(var i=function(i){var o=n[i];setTimeout((function(){o.is_dot_displayed=!0,t.setState({tree_nodes:n})}),j*e*i),setTimeout((function(){o.is_line_displayed=!0,t.setState({tree_nodes:n})}),j*e*i+T)},o=0;o<n.length;o++)i(o);for(var a=j*e*n.length+T,s=this.getUCBDot(),r={x:s.getPosition().x,y:s.getPosition().y},c=this.KDTree.getNodeTraversedAfterInsertion(r),l=this.KDTree.performNearestSearching(r),u=l.nearest,d=l.bound_animation,h=l.crossing_animation,g=u.getID(),p=this.state.searching_bound,m=0;m<c.length;m++){var f=c[m],w={x_bound:f.getXBound(),y_bound:f.getYBound()},v=a+j*e*m,y=j*e;this.drawBoundAnimatedly(v,y,p,w),p=w}a+=j*e*(c.length+1);setTimeout((function(){t.setState({running_status:"searching"})}),a);for(var x=0;x<d.length;x++){var b=d[x],D=h[x],k=D.length,P=D.direction,_=a+j*e*2*x,O=j*e;if(this.drawLineAnimatedly(_,O,k,P),b){var B=a+j*e*(2*x+1),L={x_bound:{min:Math.min(p.x_bound.min,b.getXBound().min),max:Math.max(p.x_bound.max,b.getXBound().max)},y_bound:{min:Math.min(p.y_bound.min,b.getYBound().min),max:Math.max(p.y_bound.max,b.getYBound().max)}};this.drawBoundAnimatedly(B,O,p,L),p=L}}a+=j*e*d.length*2,setTimeout((function(){t.setState({running_status:"none"});var e=document.getElementById(g);e.style.backgroundColor="crimson",e.style.opacity=1;for(var n=document.getElementsByClassName("line"),i=0;i<n.length;i++)n[i].style.opacity=.3}),a+T),setTimeout((function(){var e=u.getPosition(),n=t.getLatLngFromPixelOffset(e);window.mapData.nearest_position=n,t.props.KDTreeToMap()}),a+T+1500)}},{key:"render",value:function(){var t=this,e=this.getUCBDot(),n=this.state.tree_nodes,i=this.state.searching_bound.x_bound.min,o=this.state.searching_bound.x_bound.max,a=this.state.searching_bound.y_bound.min,s=this.state.searching_bound.y_bound.max,r=this.state.radar_radius,c=this.state.radar_direction,l=this.state.running_status,u="searching"==l?"inline-block":"none";return Object(h.jsxs)("div",{className:"visualizer-container",children:[Object(h.jsx)(k.a,{trigger:Object(h.jsx)("button",{style:{right:"4px",bottom:"4px",width:"35px",height:"35px",position:"absolute",borderRadius:"5px",backgroundImage:"data:image/png;base64,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",opacity:.5,backgroundSize:"cover",backgroundPosition:"center"}}),position:"top right",on:["hover","focus"],arrow:!0,children:"constructing"===l?Object(h.jsx)("div",{className:"popup-container",children:" Constructing K-D Tree "}):"searching"===l?Object(h.jsxs)("div",{className:"popup-container",style:{textAlign:"left"},children:[Object(h.jsx)("div",{children:" Searching... "}),Object(h.jsx)("div",{style:{marginTop:"5px",marginBottom:"10px"},children:" * Yellow bar: best distance found so far "}),Object(h.jsx)("div",{style:{backgroundColor:"gold",borderRadius:"".concat(2,"px"),width:"".concat(100,"px"),height:"".concat(5,"px")}}),Object(h.jsx)("div",{style:{height:"10px"}})]}):Object(h.jsx)("div",{className:"popup-container",children:" Nearest neighbor found "})}),Object(h.jsx)("div",{className:"bound",id:"bound-top",style:{height:"".concat(5,"px"),left:i,top:a,width:o-i,marginTop:"".concat(-2.5,"px")}}),Object(h.jsx)("div",{className:"bound",id:"bound-bottom",style:{height:"".concat(5,"px"),left:i,top:s,width:o-i,marginTop:"".concat(-2.5,"px")}}),Object(h.jsx)("div",{className:"bound",id:"bound-left",style:{width:"".concat(5,"px"),left:i,top:a,height:s-a,marginLeft:"".concat(-2.5,"px")}}),Object(h.jsx)("div",{className:"bound",id:"bound-right",style:{width:"".concat(5,"px"),left:o,top:a,height:s-a,marginLeft:"".concat(-2.5,"px")}}),Object(h.jsx)("div",{className:"dot",style:{left:"".concat(e.getPosition().x,"px"),top:"".concat(e.getPosition().y,"px"),backgroundColor:"blue"}}),this.drawLine(e.getPosition().x-2.5,e.getPosition().y-2.5,r,5,"gold",c,u,4),n.map((function(e,n){var i=e.node,o=(i.getDot(),i.getLine()),a=e.is_dot_displayed,s=e.is_line_displayed,r=i.getID();"none"==l&&(a=!1);var c=o.getIsVertical(),u=o.getPosition().x,d=o.getPosition().y,g=o.getXBound(),p=o.getYBound(),m=a?1:.3,f=s?"inline-block":"none",w=c?"rgb(187, 145, 248)":"mediumaquamarine",v=a?w:"crimson",y=c?u-1:g.min,x=c?p.min:d-1,b=c?p.max-p.min:g.max-g.min,D=c?"down":"right";return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"dot",id:r,style:{left:u,top:d,opacity:m,backgroundColor:v}}),t.drawLine(y,x,b,2,w,D,f,1)]})}))]})}}]),n}(i.Component),_=(n(19),n.p+"static/media/googlemaps.f95ed196.jpeg"),O=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).state={viewToDisplay:f},i.visualizeKDTree=i.visualizeKDTree.bind(Object(l.a)(i)),i.KDTreeToMap=i.KDTreeToMap.bind(Object(l.a)(i)),i}return Object(c.a)(n,[{key:"visualizeKDTree",value:function(){var t=this,e=window.mapData.markers;if(e&&0!=e.length){for(var n=window.mapData.map,i=function(t){setTimeout((function(){var e=[{stylers:[{lightness:-50-20*t}]}];n.setOptions({styles:e})}),400*t)},o=0;o<3;o++)i(o);setTimeout((function(){t.setState({viewToDisplay:P})}),1200)}else alert("Please search some locations before visualization \n \n e.g. McDonalds, Ramen")}},{key:"KDTreeToMap",value:function(){this.setState({viewToDisplay:f}),document.getElementById("pac-input").style.display="none",setTimeout((function(){if(window.mapData.nearest_position){var t=window.google,e=window.mapData.markers,n=window.mapData.ucb_marker,i=window.mapData.map,o=window.mapData.nearest_position.index;e.forEach((function(t){t.setMap(null)}));var a=window.mapData.markers[o],s=new t.maps.LatLngBounds;s.extend(n.getPosition()),s.extend(a.getPosition()),a.setAnimation(null),a.setMap(i),i.fitBounds(s),window.mapData.nearestInfowindow.open({anchor:a,map:i,shouldFocus:!1})}}),3e3)}},{key:"render",value:function(){var t=this.state.viewToDisplay,e=window.mapData.shouldPopUpDisplay?"inline-block":"none";return window.mapData.shouldPopUpDisplay=!1,Object(h.jsxs)("div",{children:[Object(h.jsx)(k.a,{position:"right center",defaultOpen:!0,children:Object(h.jsxs)("div",{id:"popup-container",style:{display:e},children:[Object(h.jsx)("h3",{className:"popup-h3-text",children:"Welcome to K-D Tree Visualizer!"}),Object(h.jsx)("h6",{className:"popup-h6-text",children:"K-D Tree is a powerful space-partitioning data structure that is widely used for nearest neighbor searching in map applications."}),Object(h.jsx)("h6",{className:"popup-h6-text",children:"So, what would it looks like behind the scene if Google Maps uses K-D tree for nearest neighbor searching? This visualizer present you the searching process near UC Berkeley among locations of your choice."}),Object(h.jsx)("img",{width:"300px",height:"300px",src:_}),Object(h.jsx)("p",{children:"Click the map to start"})]})}),Object(h.jsx)(t,{visualizeKDTree:this.visualizeKDTree,KDTreeToMap:this.KDTreeToMap})]})}}]),n}(i.Component);var B=function(){return window.mapData={map:null,searchBox:null,ucb_marker:null,markers:[],nearest_position:null,nearestInfowindow:null,shouldPopUpDisplay:!0},Object(h.jsx)(O,{})},L=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,23)).then((function(e){var n=e.getCLS,i=e.getFID,o=e.getFCP,a=e.getLCP,s=e.getTTFB;n(t),i(t),o(t),a(t),s(t)}))};s.a.render(Object(h.jsx)(o.a.StrictMode,{children:Object(h.jsx)(B,{})}),document.getElementById("root")),L()}],[[20,1,2]]]);
//# sourceMappingURL=main.3f0b0cd2.chunk.js.map